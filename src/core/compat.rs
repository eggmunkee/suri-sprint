
use ggez::event::{KeyCode,KeyMods,Axis,Button,GamepadId};
use serde::{Serialize,Deserialize,de::DeserializeOwned};

#[derive(Clone,Debug,PartialEq,Serialize,Deserialize)]
#[repr(u32)]
pub enum VKeyCode {
    Key1,
    Key2,
    Key3,
    Key4,
    Key5,
    Key6,
    Key7,
    Key8,
    Key9,
    Key0,
    A,
    B,
    C,
    D,
    E,
    F,
    G,
    H,
    I,
    J,
    K,
    L,
    M,
    N,
    O,
    P,
    Q,
    R,
    S,
    T,
    U,
    V,
    W,
    X,
    Y,
    Z,
    Escape,
    F1,
    F2,
    F3,
    F4,
    F5,
    F6,
    F7,
    F8,
    F9,
    F10,
    F11,
    F12,
    F13,
    F14,
    F15,
    F16,
    F17,
    F18,
    F19,
    F20,
    F21,
    F22,
    F23,
    F24,
    Snapshot,
    Scroll,
    Pause,
    Insert,
    Home,
    Delete,
    End,
    PageDown,
    PageUp,
    Left,
    Up,
    Right,
    Down,
    Back,
    Return,
    Space,
    Numlock,
    Numpad0,
    Numpad1,
    Numpad2,
    Numpad3,
    Numpad4,
    Numpad5,
    Numpad6,
    Numpad7,
    Numpad8,
    Numpad9,
    AbntC1,
    AbntC2,
    Add,
    Apostrophe,
    Apps,
    At,
    Ax,
    Backslash,
    Calculator,
    Capital,
    Colon,
    Comma,
    Convert,
    Decimal,
    Divide,
    Equals,
    Grave,
    Kana,
    Kanji,
    LAlt,
    LBracket,
    LControl,
    //LMenu,
    LShift,
    LWin,
    Mail,
    MediaSelect,
    MediaStop,
    Minus,
    Multiply,
    Mute,
    MyComputer,
    NavigateForward,
    NavigateBackward,
    NextTrack,
    NoConvert,
    NumpadComma,
    NumpadEnter,
    NumpadEquals,
    OEM102,
    Period,
    PlayPause,
    Power,
    PrevTrack,
    RAlt,
    RBracket,
    RControl,
    //RMenu,
    RShift,
    RWin,
    Semicolon,
    Slash,
    Sleep,
    Stop,
    Subtract,
    Sysrq,
    Tab,
    Underline,
    Unlabeled,
    VolumeDown,
    VolumeUp,
    Wake,
    WebBack,
    WebFavorites,
    WebForward,
    WebHome,
    WebRefresh,
    WebSearch,
    WebStop,
    Yen,
    Compose,
    Caret,
    Copy,
    Cut,
    Paste
}

#[macro_export]
macro_rules! match_enum_to_enum {
    ( $val:expr, $enum1:ident, $enum2:ident, $( $x:ident ) , * ) => {
        match $val {
            $(
                $enum1::$x => $enum2::$x,
            )*            
        }
    };
}

#[macro_export]
macro_rules! match_enum_ref_to_enum {
    ( $val:expr, $enum1:ident, $enum2:ident, $( $x:ident ) , * ) => {
        match $val {
            $(
                &$enum1::$x => $enum2::$x,
            )*            
        }
    };
}

impl From<VKeyCode> for KeyCode {
    fn from(vkc: VKeyCode) -> KeyCode {
        match_enum_to_enum!(vkc, VKeyCode, KeyCode, 
            Key1,
            Key2,
            Key3,
            Key4,
            Key5,
            Key6,
            Key7,
            Key8,
            Key9,
            Key0,
            A,
            B,
            C,
            D,
            E,
            F,
            G,
            H,
            I,
            J,
            K,
            L,
            M,
            N,
            O,
            P,
            Q,
            R,
            S,
            T,
            U,
            V,
            W,
            X,
            Y,
            Z,
            Escape,
            F1,
            F2,
            F3,
            F4,
            F5,
            F6,
            F7,
            F8,
            F9,
            F10,
            F11,
            F12,
            F13,
            F14,
            F15,
            F16,
            F17,
            F18,
            F19,
            F20,
            F21,
            F22,
            F23,
            F24,
            Snapshot,
            Scroll,
            Pause,
            Insert,
            Home,
            Delete,
            End,
            PageDown,
            PageUp,
            Left,
            Up,
            Right,
            Down,
            Back,
            Return,
            Space,
            Numlock,
            Numpad0,
            Numpad1,
            Numpad2,
            Numpad3,
            Numpad4,
            Numpad5,
            Numpad6,
            Numpad7,
            Numpad8,
            Numpad9,
            AbntC1,
            AbntC2,
            Add,
            Apostrophe,
            Apps,
            At,
            Ax,
            Backslash,
            Calculator,
            Capital,
            Colon,
            Comma,
            Convert,
            Decimal,
            Divide,
            Equals,
            Grave,
            Kana,
            Kanji,
            LAlt,
            LBracket,
            LControl,
            LShift,
            LWin,
            Mail,
            MediaSelect,
            MediaStop,
            Minus,
            Multiply,
            Mute,
            MyComputer,
            NavigateForward,
            NavigateBackward,
            NextTrack,
            NoConvert,
            NumpadComma,
            NumpadEnter,
            NumpadEquals,
            OEM102,
            Period,
            PlayPause,
            Power,
            PrevTrack,
            RAlt,
            RBracket,
            RControl,
            RShift,
            RWin,
            Semicolon,
            Slash,
            Sleep,
            Stop,
            Subtract,
            Sysrq,
            Tab,
            Underline,
            Unlabeled,
            VolumeDown,
            VolumeUp,
            Wake,
            WebBack,
            WebFavorites,
            WebForward,
            WebHome,
            WebRefresh,
            WebSearch,
            WebStop,
            Yen,
            Compose,
            Caret,
            Copy,
            Cut,
            Paste )
    }
}

impl From<KeyCode> for VKeyCode {
    fn from(vkc: KeyCode) -> VKeyCode {
        match_enum_to_enum!(vkc, KeyCode, VKeyCode, 
            Key1,
            Key2,
            Key3,
            Key4,
            Key5,
            Key6,
            Key7,
            Key8,
            Key9,
            Key0,
            A,
            B,
            C,
            D,
            E,
            F,
            G,
            H,
            I,
            J,
            K,
            L,
            M,
            N,
            O,
            P,
            Q,
            R,
            S,
            T,
            U,
            V,
            W,
            X,
            Y,
            Z,
            Escape,
            F1,
            F2,
            F3,
            F4,
            F5,
            F6,
            F7,
            F8,
            F9,
            F10,
            F11,
            F12,
            F13,
            F14,
            F15,
            F16,
            F17,
            F18,
            F19,
            F20,
            F21,
            F22,
            F23,
            F24,
            Snapshot,
            Scroll,
            Pause,
            Insert,
            Home,
            Delete,
            End,
            PageDown,
            PageUp,
            Left,
            Up,
            Right,
            Down,
            Back,
            Return,
            Space,
            Numlock,
            Numpad0,
            Numpad1,
            Numpad2,
            Numpad3,
            Numpad4,
            Numpad5,
            Numpad6,
            Numpad7,
            Numpad8,
            Numpad9,
            AbntC1,
            AbntC2,
            Add,
            Apostrophe,
            Apps,
            At,
            Ax,
            Backslash,
            Calculator,
            Capital,
            Colon,
            Comma,
            Convert,
            Decimal,
            Divide,
            Equals,
            Grave,
            Kana,
            Kanji,
            LAlt,
            LBracket,
            LControl,
            LShift,
            LWin,
            Mail,
            MediaSelect,
            MediaStop,
            Minus,
            Multiply,
            Mute,
            MyComputer,
            NavigateForward,
            NavigateBackward,
            NextTrack,
            NoConvert,
            NumpadComma,
            NumpadEnter,
            NumpadEquals,
            OEM102,
            Period,
            PlayPause,
            Power,
            PrevTrack,
            RAlt,
            RBracket,
            RControl,
            RShift,
            RWin,
            Semicolon,
            Slash,
            Sleep,
            Stop,
            Subtract,
            Sysrq,
            Tab,
            Underline,
            Unlabeled,
            VolumeDown,
            VolumeUp,
            Wake,
            WebBack,
            WebFavorites,
            WebForward,
            WebHome,
            WebRefresh,
            WebSearch,
            WebStop,
            Yen,
            Compose,
            Caret,
            Copy,
            Cut,
            Paste )


    }
}

impl From<&KeyCode> for VKeyCode {
    fn from(vkc: &KeyCode) -> VKeyCode {
        match_enum_ref_to_enum!(vkc, KeyCode, VKeyCode, 
            Key1,
            Key2,
            Key3,
            Key4,
            Key5,
            Key6,
            Key7,
            Key8,
            Key9,
            Key0,
            A,
            B,
            C,
            D,
            E,
            F,
            G,
            H,
            I,
            J,
            K,
            L,
            M,
            N,
            O,
            P,
            Q,
            R,
            S,
            T,
            U,
            V,
            W,
            X,
            Y,
            Z,
            Escape,
            F1,
            F2,
            F3,
            F4,
            F5,
            F6,
            F7,
            F8,
            F9,
            F10,
            F11,
            F12,
            F13,
            F14,
            F15,
            F16,
            F17,
            F18,
            F19,
            F20,
            F21,
            F22,
            F23,
            F24,
            Snapshot,
            Scroll,
            Pause,
            Insert,
            Home,
            Delete,
            End,
            PageDown,
            PageUp,
            Left,
            Up,
            Right,
            Down,
            Back,
            Return,
            Space,
            Numlock,
            Numpad0,
            Numpad1,
            Numpad2,
            Numpad3,
            Numpad4,
            Numpad5,
            Numpad6,
            Numpad7,
            Numpad8,
            Numpad9,
            AbntC1,
            AbntC2,
            Add,
            Apostrophe,
            Apps,
            At,
            Ax,
            Backslash,
            Calculator,
            Capital,
            Colon,
            Comma,
            Convert,
            Decimal,
            Divide,
            Equals,
            Grave,
            Kana,
            Kanji,
            LAlt,
            LBracket,
            LControl,
            LShift,
            LWin,
            Mail,
            MediaSelect,
            MediaStop,
            Minus,
            Multiply,
            Mute,
            MyComputer,
            NavigateForward,
            NavigateBackward,
            NextTrack,
            NoConvert,
            NumpadComma,
            NumpadEnter,
            NumpadEquals,
            OEM102,
            Period,
            PlayPause,
            Power,
            PrevTrack,
            RAlt,
            RBracket,
            RControl,
            RShift,
            RWin,
            Semicolon,
            Slash,
            Sleep,
            Stop,
            Subtract,
            Sysrq,
            Tab,
            Underline,
            Unlabeled,
            VolumeDown,
            VolumeUp,
            Wake,
            WebBack,
            WebFavorites,
            WebForward,
            WebHome,
            WebRefresh,
            WebSearch,
            WebStop,
            Yen,
            Compose,
            Caret,
            Copy,
            Cut,
            Paste )
    }
}

#[derive(Clone,Debug,PartialEq,Serialize,Deserialize)]
// #[serde(remote="Button")]
#[repr(u16)]
pub enum VButton {
    South,
    East,
    North,
    West,
    C,
    Z,
    LeftTrigger,
    LeftTrigger2,
    RightTrigger,
    RightTrigger2,
    Select,
    Start,
    Mode,
    LeftThumb,
    RightThumb,
    DPadUp,
    DPadDown,
    DPadLeft,
    DPadRight,
    Unknown,
}

impl From<Button> for VButton {
    fn from(vkc: Button) -> VButton {
        match_enum_to_enum!(vkc, Button, VButton,
            South,
            East,
            North,
            West,
            C,
            Z,
            LeftTrigger,
            LeftTrigger2,
            RightTrigger,
            RightTrigger2,
            Select,
            Start,
            Mode,
            LeftThumb,
            RightThumb,
            DPadUp,
            DPadDown,
            DPadLeft,
            DPadRight,
            Unknown
        )
    }
}


impl From<&Button> for VButton {
    fn from(vkc: &Button) -> VButton {
        match_enum_ref_to_enum!(vkc, Button, VButton,
            South,
            East,
            North,
            West,
            C,
            Z,
            LeftTrigger,
            LeftTrigger2,
            RightTrigger,
            RightTrigger2,
            Select,
            Start,
            Mode,
            LeftThumb,
            RightThumb,
            DPadUp,
            DPadDown,
            DPadLeft,
            DPadRight,
            Unknown
        )
    }
}